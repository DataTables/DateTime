/*! DateTime picker for DataTables.net v2.0.0-dev
 *
 * Â© SpryMedia Ltd, all rights reserved.
 * License: MIT datatables.net/license/mit
 */
import DataTable from"datatables.net";var dateLib,dom=DataTable.dom,util=DataTable.util,DateTime=(()=>{function i(t,e){var s=window,s=(void 0===dateLib&&(dateLib=s.moment||s.dayjs||s.luxon||null),this.c=util.object.assignDeep({},i.defaults,e),this.c.classPrefix);if(!dateLib&&"YYYY-MM-DD"!==this.c.format)throw"DateTime: Without momentjs, dayjs or luxon only the format 'YYYY-MM-DD' can be used";this._isLuxon()&&"YYYY-MM-DD"==this.c.format&&(this.c.format="yyyy-MM-dd"),"string"==typeof this.c.minDate&&(this.c.minDate=new Date(this.c.minDate)),"string"==typeof this.c.maxDate&&(this.c.maxDate=new Date(this.c.maxDate));e=dom.c("div").classAdd(s).html('<div class="'+s+'-date"><div class="'+s+'-title"><div class="'+s+'-iconLeft"><button type="button"></button></div><div class="'+s+'-iconRight"><button type="button"></button></div><div class="'+s+'-label"><span></span><select class="'+s+'-month"></select></div><div class="'+s+'-label"><span></span><select class="'+s+'-year"></select></div></div><div class="'+s+'-buttons"><a class="'+s+'-clear"></a><a class="'+s+'-today"></a><a class="'+s+'-selected"></a></div><div class="'+s+'-calendar"></div></div><div class="'+s+'-time"><div class="'+s+'-hours"></div><div class="'+s+'-minutes"></div><div class="'+s+'-seconds"></div></div><div class="'+s+'-error"></div>');this.dom={container:e,date:e.find("."+s+"-date"),title:e.find("."+s+"-title"),calendar:e.find("."+s+"-calendar"),time:e.find("."+s+"-time"),error:e.find("."+s+"-error"),buttons:e.find("."+s+"-buttons"),clear:e.find("."+s+"-clear"),today:e.find("."+s+"-today"),selected:e.find("."+s+"-selected"),previous:e.find("."+s+"-iconLeft"),next:e.find("."+s+"-iconRight"),input:dom.s(t)},this.s={d:null,display:null,minutesRange:null,secondsRange:null,namespace:"datetime-"+i._instance++,parts:{date:null!==this.c.format.match(/[yYMDd]|L(?!T)|l/),time:null!==this.c.format.match(/[Hhm]|LT|LTS/),seconds:-1!==this.c.format.indexOf("s"),hours12:null!==this.c.format.match(/[haA]/)},showTo:null},this.dom.container.append(this.dom.date).append(this.dom.time).append(this.dom.error),this.dom.date.append(this.dom.title).append(this.dom.buttons).append(this.dom.calendar),this.dom.input.classAdd("dt-datetime"),this._init()}return i.use=function(t){dateLib=t},i.prototype.destroy=function(){clearTimeout(this.s.showTo),this._hide(!0),this.dom.container.off().empty(),this.dom.input.classRemove("dt-datetime").removeAttr("autocomplete").off(".datetime")},i.prototype.display=function(t,e){return void 0!==t&&this.s.display.setUTCFullYear(t),void 0!==e&&this.s.display.setUTCMonth(e-1),void 0!==t||void 0!==e?(this._setTitle(),this._setCalander(),this):this.s.display?{month:this.s.display.getUTCMonth()+1,year:this.s.display.getUTCFullYear()}:{month:null,year:null}},i.prototype.errorMsg=function(t){var e=this.dom.error;return t?e.html(t):e.empty(),this},i.prototype.hide=function(){return this._hide(),this},i.prototype.max=function(t){return this.c.maxDate="string"==typeof t?new Date(t):t,this._optionsTitle(),this._setCalander(),this},i.prototype.min=function(t){return this.c.minDate="string"==typeof t?new Date(t):t,this._optionsTitle(),this._setCalander(),this},i.prototype.owns=function(t){return 0<dom.s(t).closest(this.dom.container.get(0)).count()},i.prototype.val=function(t,e){var s;return void 0===e&&(e=!0),void 0===t?this.s.d:(s=this.s.d,t instanceof Date?this.s.d=this._dateToUtc(t):null===t||""===t?this.s.d=null:"--now"===t?this.s.d=this._dateToUtc(new Date):"string"==typeof t&&(this.s.d=this._dateToUtc(this._convert(t,this.c.format,null))),!e&&void 0!==e||(this.s.d?this._writeOutput(!1,null===s&&null!==this.s.d||null!==s&&null===this.s.d||s.toString()!==this.s.d.toString()):this.dom.input.val(t)),this.s.d?this.s.display=new Date(this.s.d.toString()):this.c.display?(this.s.display=new Date,this.s.display.setUTCDate(1),this.display(this.c.display.year,this.c.display.month)):this.s.display=new Date,this.s.display.setUTCDate(1),this._setTitle(),this._setCalander(),this._setTime(),this)},i.prototype.valFormat=function(t,e){return e?(this.val(this._convert(e,t,null)),this):this._convert(this.val(),null,t)},i.prototype._init=function(){function a(){var t=n.dom.input.val();t!==e&&(n.c.onChange.call(n,t,n.s.d,n.dom.input),e=t)}var n=this,d=this.c.classPrefix,e=this.dom.input.val();this.s.parts.date||this.dom.date.css("display","none"),this.s.parts.time||this.dom.time.css("display","none"),this.s.parts.seconds||(this.dom.time.children("div."+d+"-seconds").remove(),this.dom.time.children("span").eq(1).remove()),this.c.buttons.clear||this.dom.clear.css("display","none"),this.c.buttons.today||this.dom.today.css("display","none"),this.c.buttons.selected||this.dom.selected.css("display","none"),this._optionsTitle(),dom.s(document).on("i18n.dt",function(t,e){e.language.datetime&&(util.object.assignDeep(n.c.i18n,e.language.datetime),n._optionsTitle())}),"hidden"!==this.dom.input.attr("type")&&!this.c.alwaysVisible||(this.dom.container.classAdd("inline"),this.c.attachTo="input",this.val(this.dom.input.val(),!1),this._show()),e&&this.val(e,!1),this.dom.input.attr("autocomplete","off").on("focus.datetime click.datetime",function(){n.dom.container.is(":visible")||n.dom.input.is(":disabled")||(e=n.dom.input.val(),n.val(e,!1),n._show())}).on("keyup.datetime",function(){n.val(n.dom.input.val(),!1)}),this.dom.container[0].addEventListener("focusin",function(t){t.stopPropagation()}),this.dom.container.on("change","select",function(){var t,e,s=dom.s(this),i=parseInt(s.val());s.classHas(d+"-month")?(n._correctMonth(n.s.display,i),n._setTitle(),n._setCalander()):s.classHas(d+"-year")?(n.s.display.setUTCFullYear(i),n._setTitle(),n._setCalander()):s.classHas(d+"-hours")||s.classHas(d+"-ampm")?(n.s.parts.hours12?(t=parseInt(n.dom.container.find("."+d+"-hours").val(),10),e="pm"===n.dom.container.find("."+d+"-ampm").val(),n.s.d.setUTCHours(12!==t||e?e&&12!==t?t+12:t:0)):n.s.d.setUTCHours(i),n._setTime(),n._writeOutput(!0),a()):s.classHas(d+"-minutes")?(n.s.d.setUTCMinutes(i),n._setTime(),n._writeOutput(!0),a()):s.classHas(d+"-seconds")&&(n.s.d.setSeconds(i),n._setTime(),n._writeOutput(!0),a()),n.dom.input.focus(),n._position()}).on("click",function(t){var e=n.s.d,s="span"===t.target.nodeName.toLowerCase()?t.target.parentNode:t.target,i=s.nodeName.toLowerCase();if("select"!==i)if(t.stopPropagation(),"a"===i&&(t.preventDefault(),dom.s(s).classHas(d+"-clear")?(n.s.d=null,n.dom.input.val(""),n._writeOutput(),n._setCalander(),n._setTime(),a()):dom.s(s).classHas(d+"-today")?(n.s.display=new Date,n._setTitle(),n._setCalander()):dom.s(s).classHas(d+"-selected")&&(n.s.display=new Date(n.s.d.getTime()),n._setTitle(),n._setCalander())),"button"===i){t=dom.s(s),i=t.parent();if(i.classHas("disabled")&&!i.classHas("range"))t.blur();else if(i.classHas(d+"-iconLeft"))n.s.display.setUTCMonth(n.s.display.getUTCMonth()-1),n._setTitle(),n._setCalander(),n.dom.input.focus();else if(i.classHas(d+"-iconRight"))n._correctMonth(n.s.display,n.s.display.getUTCMonth()+1),n._setTitle(),n._setCalander(),n.dom.input.focus();else{if(t.closest("."+d+"-time").count()){var s=t.data("value"),o=t.data("unit"),e=n._needValue();if("minutes"===o){if(i.classHas("disabled")&&i.classHas("range"))return n.s.minutesRange=s,void n._setTime();n.s.minutesRange=null}if("seconds"===o){if(i.classHas("disabled")&&i.classHas("range"))return n.s.secondsRange=s,void n._setTime();n.s.secondsRange=null}if("am"===s){if(!(12<=e.getUTCHours()))return;s=e.getUTCHours()-12}else if("pm"===s){if(!(e.getUTCHours()<12))return;s=e.getUTCHours()+12}e["hours"===o?"setUTCHours":"minutes"===o?"setUTCMinutes":"setSeconds"](s),n._setCalander(),n._setTime(),n._writeOutput(!0)}else(e=n._needValue()).setUTCDate(1),e.setUTCFullYear(t.data("year")),e.setUTCMonth(t.data("month")),e.setUTCDate(t.data("day")),n._writeOutput(!0),n.s.parts.time?(n._setCalander(),n._setTime()):setTimeout(function(){n._hide()},10);a()}}else n.dom.input.focus()})},i.prototype._compareDates=function(t,e){return this._isLuxon()?dateLib.DateTime.fromJSDate(t).toUTC().toISODate()===dateLib.DateTime.fromJSDate(e).toUTC().toISODate():this._dateToUtcString(t)===this._dateToUtcString(e)},i.prototype._convert=function(t,e,s){var i;return t&&(dateLib?this._isLuxon()?(i=t instanceof Date?dateLib.DateTime.fromJSDate(t).toUTC():dateLib.DateTime.fromFormat(t,e)).isValid?s?i.toFormat(s):i.toJSDate():null:(i=t instanceof Date?dateLib.utc(t,void 0,this.c.locale,this.c.strict):dateLib(t,e,this.c.locale,this.c.strict)).isValid()?s?i.format(s):i.toDate():null:!e&&!s||e&&s?t:!e&&t instanceof Date?t.getUTCFullYear()+"-"+this._pad(t.getUTCMonth()+1)+"-"+this._pad(t.getUTCDate()):"string"==typeof t?(i=t.match(/(\d{4})\-(\d{2})\-(\d{2})/))?new Date(parseInt(i[1]),parseInt(i[2])-1,parseInt(i[3])):null:void 0)},i.prototype._correctMonth=function(t,e){var s=this._daysInMonth(t.getUTCFullYear(),e),i=t.getUTCDate()>s;t.setUTCMonth(e),i&&(t.setUTCDate(s),t.setUTCMonth(e))},i.prototype._daysInMonth=function(t,e){return[31,t%4==0&&(t%100!=0||t%400==0)?29:28,31,30,31,30,31,31,30,31,30,31][e]},i.prototype._dateToUtc=function(t){return t&&new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds()))},i.prototype._dateToUtcString=function(t){return this._isLuxon()?dateLib.DateTime.fromJSDate(t).toUTC().toISODate():t.getUTCFullYear()+"-"+this._pad(t.getUTCMonth()+1)+"-"+this._pad(t.getUTCDate())},i.prototype._hide=function(t){(t=void 0!==t&&t)||"hidden"!==this.dom.input.attr("type")&&!this.c.alwaysVisible?(t=this.s.namespace,this.dom.container.detach(),dom.w.off("."+t),dom.s(document).off("keydown."+t).off("keyup."+t).off("click."+t),dom.s("div.dt-scroll").off("scroll."+t),dom.s("div.DTE_Body_Content").off("scroll."+t),dom.s(this.dom.input.get(0).offsetParent).off("."+t)):(this._setCalander(),this._setTime())},i.prototype._hours24To12=function(t){return 0===t?12:12<t?t-12:t},i.prototype._htmlDay=function(t){var e,s=this.c.classPrefix;return t.empty?'<td class="'+s+'-empty"></td>':(e=["selectable"],t.disabled&&e.push("disabled"),t.today&&e.push("now"),t.selected&&e.push("selected"),'<td data-day="'+t.day+'" class="'+e.join(" ")+'"><button class="'+s+"-button "+s+'-day" type="button" data-year="'+t.year+'" data-month="'+t.month+'" data-day="'+t.day+'"><span>'+t.day+"</span></button></td>")},i.prototype._htmlMonth=function(t,e){for(var s=this._dateToUtc(new Date),i=this._daysInMonth(t,e),o=new Date(Date.UTC(t,e,1)).getUTCDay(),a=[],n=[],d=(0<this.c.firstDay&&(o-=this.c.firstDay)<0&&(o+=7),i+o),r=d;7<r;)r-=7;d+=7-r;var l=this.c.minDate,c=this.c.maxDate;l&&(l.setUTCHours(0),l.setUTCMinutes(0),l.setSeconds(0)),c&&(c.setUTCHours(23),c.setUTCMinutes(59),c.setSeconds(59));for(var h=0,u=0;h<d;h++){var m=new Date(Date.UTC(t,e,h-o+1)),p=!!this.s.d&&this._compareDates(m,this.s.d),f=this._compareDates(m,s),y=h<o||i+o<=h,T=l&&m<l||c&&c<m,v=this.c.disableDays,p={day:h-o+1,month:e,year:t,selected:p,today:f,disabled:T=Array.isArray(v)&&v.includes(m.getUTCDay())||"function"==typeof v&&!0===v(m)?!0:T,empty:y};n.push(this._htmlDay(p)),7==++u&&(this.c.showWeekNumber&&n.unshift(this._htmlWeekOfYear(h-o,e,t)),a.push("<tr>"+n.join("")+"</tr>"),n=[],u=0)}var _,D=this.c.classPrefix,b=D+"-table";return this.c.showWeekNumber&&(b+=" weekNumber"),l&&(_=l>=new Date(Date.UTC(t,e,1,0,0,0)),this.dom.title.find("div."+D+"-iconLeft").css("display",_?"none":"block")),c&&(_=c<new Date(Date.UTC(t,e+1,1,0,0,0)),this.dom.title.find("div."+D+"-iconRight").css("display",_?"none":"block")),'<table class="'+b+'"><thead>'+this._htmlMonthHead()+"</thead><tbody>"+a.join("")+"</tbody></table>"},i.prototype._htmlMonthHead=function(){var t=[],e=this.c.firstDay,s=this.c.i18n;this.c.showWeekNumber&&t.push("<th></th>");for(var i=0;i<7;i++)t.push("<th>"+(t=>{for(t+=e;7<=t;)t-=7;return s.weekdays[t]})(i)+"</th>");return t.join("")},i.prototype._htmlWeekOfYear=function(t,e,s){e=new Date(s,e,t,0,0,0,0),e.setDate(e.getDate()+4-(e.getDay()||7)),t=new Date(s,0,1),s=Math.ceil(((e-t)/864e5+1)/7);return'<td class="'+this.c.classPrefix+'-week">'+s+"</td>"},i.prototype._isLuxon=function(){return!!(dateLib&&dateLib.DateTime&&dateLib.Duration&&dateLib.Settings)},i.prototype._needValue=function(){return this.s.d||(this.s.d=this._dateToUtc(new Date),this.s.parts.time)||(this.s.d.setUTCHours(0),this.s.d.setUTCMinutes(0),this.s.d.setSeconds(0),this.s.d.setMilliseconds(0)),this.s.d},i.prototype._options=function(t,e,s){s=s||e;var i=this.dom.container.find("select."+this.c.classPrefix+"-"+t);i.empty();for(var o=0,a=e.length;o<a;o++)i.append(dom.c("option").attr("value",e[o]).text(s[o]))},i.prototype._optionSet=function(t,e){var t=this.dom.container.find("select."+this.c.classPrefix+"-"+t),s=t.parent().children("span"),e=(t.val(e),t.find("option:selected"));s.html(0!==e.count()?e.text():this.c.i18n.unknown)},i.prototype._optionsTime=function(o,a,n,d,t){var e,r=this.c.classPrefix,s=this.dom.container.find("div."+r+"-"+o),i=12===a?function(t){return t}:this._pad,l=r+"-table",c=this.c.i18n;if(s.count()){var h="",u=10,m=function(t,e,s){void 0===s&&(s=null),12===a&&"number"==typeof t&&(12<=n&&(t+=12),12==t?t=0:24==t&&(t=12));var i=n===t||"am"===t&&n<12||"pm"===t&&12<=n?"selected":"";return"number"==typeof t&&d&&!d.includes(t)&&(i+=" disabled"),s&&(i+=" "+s),'<td class="selectable '+i+'"><button class="'+r+"-button "+r+'-day" type="button" data-unit="'+o+'" data-value="'+t+'"><span>'+e+"</span></button></td>"};if(12===a){for(h+="<tr>",e=1;e<=6;e++)h+=m(e,i(e));for(h=(h+=m("am",c.amPm[0]))+"</tr>"+"<tr>",e=7;e<=12;e++)h+=m(e,i(e));h=h+m("pm",c.amPm[1])+"</tr>",u=7}else{if(24===a)for(var p=0,f=0;f<4;f++){for(h+="<tr>",e=0;e<6;e++)h+=m(p,i(p)),p++;h+="</tr>"}else{for(h+="<tr>",f=0;f<60;f+=10)h+=m(f,i(f),"range");var h=h+"</tr>"+('</tbody></thead><table class="'+l+" "+l+'-nospace"><tbody>'),y=null!==t?t:-1===n?0:10*Math.floor(n/10);for(h+="<tr>",f=y+1;f<y+10;f++)h+=m(f,i(f));h+="</tr>"}u=6}s.empty().html('<table class="'+l+'"><thead><tr><th colspan="'+u+'">'+c[o]+"</th></tr></thead><tbody>"+h+"</tbody></table>")}},i.prototype._optionsTitle=function(){var t=this.c.i18n,e=this.c.minDate,s=this.c.maxDate,e=e?e.getFullYear():null,s=s?s.getFullYear():null,e=null!==e?e:(new Date).getFullYear()-this.c.yearRange,s=null!==s?s:(new Date).getFullYear()+this.c.yearRange;this._options("month",this._range(0,11),t.months),this._options("year",this._range(e,s)),this.dom.today.text(t.today).text(t.today),this.dom.selected.text(t.selected).text(t.selected),this.dom.clear.text(t.clear).text(t.clear),this.dom.previous.attr("title",t.previous).children("button").text(t.previous),this.dom.next.attr("title",t.next).children("button").text(t.next)},i.prototype._pad=function(t){return t<10?"0"+t:t},i.prototype._position=function(){var t,e,s,i="input"===this.c.attachTo?this.dom.input.position():this.dom.input.offset(),o=this.dom.container,a=this.dom.input.height("outer");o.classHas("inline")?o.insertAfter(this.dom.input):(this.s.parts.date&&this.s.parts.time&&550<dom.w.width()?o.classAdd("horizontal"):o.classRemove("horizontal"),"input"===this.c.attachTo?o.css({top:i.top+a+"px",left:i.left+"px"}).insertAfter(this.dom.input):o.css({top:i.top+a+"px",left:i.left+"px"}).appendTo("body"),t=o.height("outer"),e=o.width("outer"),s=dom.w.scrollTop(),i.top+a+t-s>dom.w.height()&&(a=i.top-t,o.css("top",a<0?"0":a+"px")),e+i.left>dom.w.width()&&(s=dom.w.width()-e-5,"input"===this.c.attachTo&&(s-=o.map(function(t){return t.offsetParent}).offset().left),o.css("left",s<0?"0":s+"px")))},i.prototype._range=function(t,e,s){void 0===s&&(s=1);for(var i=[],o=t;o<=e;o+=s)i.push(o);return i},i.prototype._setCalander=function(){this.s.display&&this.dom.calendar.empty().html(this._htmlMonth(this.s.display.getUTCFullYear(),this.s.display.getUTCMonth()))},i.prototype._setTitle=function(){this._optionSet("month",this.s.display.getUTCMonth()),this._optionSet("year",this.s.display.getUTCFullYear())},i.prototype._setTime=function(){function t(t){return e.c[t+"Available"]||e._range(0,59,e.c[t+"Increment"])}var e=this,s=this.s.d,i=null,o=null!=(i=this._isLuxon()?dateLib.DateTime.fromJSDate(s).toUTC():i)?i.hour:s?s.getUTCHours():-1;this._optionsTime("hours",this.s.parts.hours12?12:24,o,this.c.hoursAvailable),this._optionsTime("minutes",60,null!=i?i.minute:s?s.getUTCMinutes():-1,t("minutes"),this.s.minutesRange),this._optionsTime("seconds",60,null!=i?i.second:s?s.getSeconds():-1,t("seconds"),this.s.secondsRange)},i.prototype._show=function(){var e=this,t=this.s.namespace,s=(this._position(),dom.w.on("scroll."+t+" resize."+t,function(){e._position()}),dom.s("div.DTE_Body_Content").on("scroll."+t,function(){e._position()}),dom.s("div.dt-scroll").on("scroll."+t,function(){e._position()}),this.dom.input.get(0).offsetParent);s!==document.body&&dom.s(s).on("scroll."+t,function(){e._position()}),dom.s(document).on("keydown."+t,function(t){!e.dom.container.is(":visible")||9!==t.keyCode&&13!==t.keyCode||e._hide()}),dom.s(document).on("keyup."+t,function(t){e.dom.container.is(":visible")&&27===t.keyCode&&(t.preventDefault(),e._hide())}),clearTimeout(this.s.showTo),this.dom.input.on("blur",function(t){e.s.showTo=setTimeout(function(){var t=document.activeElement.tagName.toLowerCase();document.activeElement===e.dom.input.get(0)||e.dom.container.find(document.activeElement).count()||["input","select","button"].includes(t)&&e.hide()},10)}),setTimeout(function(){dom.s(document).on("click."+t,function(t){dom.s(t.target).closest(e.dom.container.get(0)).count()||t.target===e.dom.input.get(0)||e._hide()})},10)},i.prototype._writeOutput=function(t,e){void 0===t&&(t=!1),void 0===e&&(e=!0);var s=this.s.d,i="",o=this.dom.input;s&&(i=this._convert(s,null,this.c.format)),o.val(i),e&&(s=new Event("change",{bubbles:!0}),o.get(0).dispatchEvent(s)),"hidden"===o.attr("type")&&this.val(i,!1),t&&o.focus()},i._instance=0,i.type="DateTime",i.defaults={alwaysVisible:!1,attachTo:"body",buttons:{clear:!1,selected:!1,today:!1},classPrefix:"dt-datetime",disableDays:null,display:null,firstDay:1,format:"YYYY-MM-DD",hoursAvailable:null,i18n:{clear:"Clear",previous:"Previous",next:"Next",months:["January","February","March","April","May","June","July","August","September","October","November","December"],weekdays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],amPm:["am","pm"],hours:"Hour",minutes:"Minute",seconds:"Second",unknown:"-",today:"Today",selected:"Selected"},maxDate:null,minDate:null,minutesAvailable:null,minutesIncrement:1,strict:!0,locale:"en",onChange:function(){},secondsAvailable:null,secondsIncrement:1,showWeekNumber:!1,yearRange:25},i.version="2.0.0-dev",i})();window.DateTime||(window.DateTime=DateTime),window.jQuery&&(window.jQuery.fn.dtDateTime=function(t){return this.each(function(){new DateTime(this,t)})}),DataTable.DateTime=DateTime,DataTable.use("datetime",DateTime),DataTable.Editor&&(DataTable.Editor.DateTime=DateTime);export default DateTime;export{DateTime};